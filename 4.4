using System;

namespace _4._4
{
    class Program
    {
        static void Main()
        {
            DrawMap();
        }

        static void DrawMap()
        {
            Console.CursorVisible = false;
            int positionX = 3;
            int positionY = 5;

            char[,] map =
            {
               {'@','@','@','@','@','@','@','@','@','@','@','@',},
               {'@',' ',' ',' ',' ',' ',' ',' ',' ',' ','X','@',},
               {'@','@',' ',' ',' ',' ',' ',' ',' ',' ','@','@',},
               {'@',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','@',},
               {'@','@','@','@','@','@','@','@','@','@','@','@',}
            };

            while (map[positionX,positionY] != 'X')
            {
                for (int i = 0; i < map.GetLength(0); i++)
                {

                    for (int j = 0; j < map.GetLength(1); j++)
                    {
                        Console.Write(map[i, j]);
                    }
                    Console.WriteLine();
                }
                
                Move(map, ref positionX, ref positionY);
            }
            
            EndGame();
        }
        static void Move(char[,] map, ref int positionX, ref int positionY)
        {
            Console.SetCursorPosition(positionY, positionX);
            Console.Write("#");
            ConsoleKeyInfo charKey = Console.ReadKey();

            switch (charKey.Key)
            {
                case ConsoleKey.UpArrow:
                    if (map[positionX - 1, positionY] != '@')
                    {
                        positionX--;
                    }
                    break;
                case ConsoleKey.DownArrow:
                    if (map[positionX + 1, positionY] != '@')
                    {
                        positionX++;
                    }
                    break;
                case ConsoleKey.LeftArrow:
                    if (map[positionX, positionY - 1] != '@')
                    {
                        positionY--;
                    }
                    break;
                case ConsoleKey.RightArrow:
                    if (map[positionX, positionY + 1] != '@')
                    {
                        positionY++;
                    }
                    break;
            }
            Console.Clear();

        }
        
        static void EndGame()
        {
            Console.WriteLine("Вы вышли из комнаты, а значит - победили!");
            return;
        }

    }
}
